"use strict";(self.webpackChunkrenerp_docs=self.webpackChunkrenerp_docs||[]).push([[588],{991:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>p,frontMatter:()=>l,metadata:()=>d,toc:()=>t});var i=r(4848),o=r(8453);const l={sidebar_position:4},s="Deployment Guide",d={id:"deployment",title:"Deployment Guide",description:"This guide will help you deploy RENERP to a production environment.",source:"@site/docs/deployment.md",sourceDirName:".",slug:"/deployment",permalink:"/renerp/deployment",draft:!1,unlisted:!1,editUrl:"https://github.com/DankiCalamari/renerp/tree/main/docs/docs/deployment.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"docs",previous:{title:"Development Guide",permalink:"/renerp/development"},next:{title:"Troubleshooting Guide",permalink:"/renerp/troubleshooting"}},c={},t=[{value:"Production Requirements",id:"production-requirements",level:2},{value:"Deployment Steps",id:"deployment-steps",level:2},{value:"1. Prepare the Environment",id:"1-prepare-the-environment",level:3},{value:"2. Build the Frontend",id:"2-build-the-frontend",level:3},{value:"3. Configure Nginx",id:"3-configure-nginx",level:3},{value:"4. Deploy with Docker Compose",id:"4-deploy-with-docker-compose",level:3},{value:"5. Start the Application",id:"5-start-the-application",level:3},{value:"Dockerfiles",id:"dockerfiles",level:2},{value:"Frontend Dockerfile",id:"frontend-dockerfile",level:3},{value:"Backend Dockerfile",id:"backend-dockerfile",level:3},{value:"Monitoring and Maintenance",id:"monitoring-and-maintenance",level:2},{value:"View Logs",id:"view-logs",level:3},{value:"Database Backups",id:"database-backups",level:3},{value:"Update Application",id:"update-application",level:3},{value:"Security Considerations",id:"security-considerations",level:2},{value:"Performance Optimization",id:"performance-optimization",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"deployment-guide",children:"Deployment Guide"}),"\n",(0,i.jsx)(n.p,{children:"This guide will help you deploy RENERP to a production environment."}),"\n",(0,i.jsx)(n.h2,{id:"production-requirements",children:"Production Requirements"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Docker and Docker Compose"}),"\n",(0,i.jsx)(n.li,{children:"MySQL 8.0 or higher"}),"\n",(0,i.jsx)(n.li,{children:"Node.js 14 or higher"}),"\n",(0,i.jsx)(n.li,{children:"Nginx (recommended for reverse proxy)"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"deployment-steps",children:"Deployment Steps"}),"\n",(0,i.jsx)(n.h3,{id:"1-prepare-the-environment",children:"1. Prepare the Environment"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Clone the repository:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/DankiCalamari/renerp.git\r\ncd renerp\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Create a production environment file:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# backend/.env.prod\r\nDATABASE_URL=mysql://user:password@db:3306/renerp\r\nSECRET_KEY=your-secure-secret-key\r\nALGORITHM=HS256\r\nACCESS_TOKEN_EXPIRE_MINUTES=30\r\nCORS_ORIGINS=https://your-domain.com\r\n\r\n# frontend/.env.prod\r\nREACT_APP_API_URL=https://api.your-domain.com\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-build-the-frontend",children:"2. Build the Frontend"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd frontend\r\nnpm install\r\nnpm run build\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-configure-nginx",children:"3. Configure Nginx"}),"\n",(0,i.jsx)(n.p,{children:"Create an Nginx configuration file:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-nginx",children:"# /etc/nginx/sites-available/renerp\r\nserver {\r\n    listen 80;\r\n    server_name your-domain.com;\r\n\r\n    # Frontend\r\n    location / {\r\n        root /var/www/renerp/frontend/build;\r\n        try_files $uri $uri/ /index.html;\r\n    }\r\n\r\n    # Backend API\r\n    location /api {\r\n        proxy_pass http://backend:8000;\r\n        proxy_set_header Host $host;\r\n        proxy_set_header X-Real-IP $remote_addr;\r\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\r\n        proxy_set_header X-Forwarded-Proto $scheme;\r\n    }\r\n\r\n    # SSL configuration (recommended)\r\n    listen 443 ssl;\r\n    ssl_certificate /etc/letsencrypt/live/your-domain.com/fullchain.pem;\r\n    ssl_certificate_key /etc/letsencrypt/live/your-domain.com/privkey.pem;\r\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"4-deploy-with-docker-compose",children:"4. Deploy with Docker Compose"}),"\n",(0,i.jsx)(n.p,{children:"Create a production Docker Compose file:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'# docker-compose.prod.yml\r\nversion: \'3.8\'\r\n\r\nservices:\r\n  frontend:\r\n    build:\r\n      context: ./frontend\r\n      dockerfile: Dockerfile.prod\r\n    volumes:\r\n      - frontend-build:/app/build\r\n    depends_on:\r\n      - backend\r\n\r\n  backend:\r\n    build:\r\n      context: ./backend\r\n      dockerfile: Dockerfile.prod\r\n    environment:\r\n      - DATABASE_URL=${DATABASE_URL}\r\n      - SECRET_KEY=${SECRET_KEY}\r\n      - ALGORITHM=${ALGORITHM}\r\n      - ACCESS_TOKEN_EXPIRE_MINUTES=${ACCESS_TOKEN_EXPIRE_MINUTES}\r\n      - CORS_ORIGINS=${CORS_ORIGINS}\r\n    volumes:\r\n      - backend-logs:/app/logs\r\n    depends_on:\r\n      - db\r\n\r\n  db:\r\n    image: mysql:8.0\r\n    environment:\r\n      - MYSQL_ROOT_PASSWORD=${DB_ROOT_PASSWORD}\r\n      - MYSQL_DATABASE=renerp\r\n      - MYSQL_USER=${DB_USER}\r\n      - MYSQL_PASSWORD=${DB_PASSWORD}\r\n    volumes:\r\n      - db-data:/var/lib/mysql\r\n\r\n  nginx:\r\n    image: nginx:alpine\r\n    ports:\r\n      - "80:80"\r\n      - "443:443"\r\n    volumes:\r\n      - ./nginx.conf:/etc/nginx/conf.d/default.conf\r\n      - ./ssl:/etc/letsencrypt\r\n      - frontend-build:/var/www/renerp/frontend/build\r\n    depends_on:\r\n      - frontend\r\n      - backend\r\n\r\nvolumes:\r\n  frontend-build:\r\n  backend-logs:\r\n  db-data:\n'})}),"\n",(0,i.jsx)(n.h3,{id:"5-start-the-application",children:"5. Start the Application"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Build and start the containers:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker-compose -f docker-compose.prod.yml up --build -d\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Run database migrations:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker-compose -f docker-compose.prod.yml exec backend alembic upgrade head\n"})}),"\n",(0,i.jsx)(n.h2,{id:"dockerfiles",children:"Dockerfiles"}),"\n",(0,i.jsx)(n.h3,{id:"frontend-dockerfile",children:"Frontend Dockerfile"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dockerfile",children:'# frontend/Dockerfile.prod\r\nFROM node:14-alpine as build\r\n\r\nWORKDIR /app\r\nCOPY package*.json ./\r\nRUN npm install\r\nCOPY . .\r\nRUN npm run build\r\n\r\nFROM nginx:alpine\r\nCOPY --from=build /app/build /usr/share/nginx/html\r\nCOPY nginx.conf /etc/nginx/conf.d/default.conf\r\nEXPOSE 80\r\nCMD ["nginx", "-g", "daemon off;"]\n'})}),"\n",(0,i.jsx)(n.h3,{id:"backend-dockerfile",children:"Backend Dockerfile"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dockerfile",children:'# backend/Dockerfile.prod\r\nFROM python:3.8-slim\r\n\r\nWORKDIR /app\r\nCOPY requirements.txt .\r\nRUN pip install --no-cache-dir -r requirements.txt\r\n\r\nCOPY . .\r\nRUN mkdir -p logs\r\n\r\nCMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8000"]\n'})}),"\n",(0,i.jsx)(n.h2,{id:"monitoring-and-maintenance",children:"Monitoring and Maintenance"}),"\n",(0,i.jsx)(n.h3,{id:"view-logs",children:"View Logs"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# View all logs\r\ndocker-compose -f docker-compose.prod.yml logs -f\r\n\r\n# View specific service logs\r\ndocker-compose -f docker-compose.prod.yml logs -f backend\r\ndocker-compose -f docker-compose.prod.yml logs -f frontend\n"})}),"\n",(0,i.jsx)(n.h3,{id:"database-backups",children:"Database Backups"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Create a backup\r\ndocker-compose -f docker-compose.prod.yml exec db mysqldump -u root -p renerp > backup.sql\r\n\r\n# Restore from backup\r\ndocker-compose -f docker-compose.prod.yml exec -T db mysql -u root -p renerp < backup.sql\n"})}),"\n",(0,i.jsx)(n.h3,{id:"update-application",children:"Update Application"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Pull latest changes:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"git pull origin main\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Rebuild and restart containers:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker-compose -f docker-compose.prod.yml up --build -d\n"})}),"\n",(0,i.jsx)(n.h2,{id:"security-considerations",children:"Security Considerations"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Use HTTPS for all traffic"}),"\n",(0,i.jsx)(n.li,{children:"Set secure environment variables"}),"\n",(0,i.jsx)(n.li,{children:"Regularly update dependencies"}),"\n",(0,i.jsx)(n.li,{children:"Implement rate limiting"}),"\n",(0,i.jsx)(n.li,{children:"Use secure headers"}),"\n",(0,i.jsx)(n.li,{children:"Regular security audits"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Enable caching"}),"\n",(0,i.jsx)(n.li,{children:"Optimize database queries"}),"\n",(0,i.jsx)(n.li,{children:"Use CDN for static assets"}),"\n",(0,i.jsx)(n.li,{children:"Implement lazy loading"}),"\n",(0,i.jsx)(n.li,{children:"Monitor resource usage"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.p,{children:"Common issues and solutions:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Database Connection Issues"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Check database credentials"}),"\n",(0,i.jsx)(n.li,{children:"Verify network connectivity"}),"\n",(0,i.jsx)(n.li,{children:"Check database logs"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Application Not Starting"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Check container logs"}),"\n",(0,i.jsx)(n.li,{children:"Verify environment variables"}),"\n",(0,i.jsx)(n.li,{children:"Check port conflicts"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Performance Issues"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Monitor resource usage"}),"\n",(0,i.jsx)(n.li,{children:"Check database indexes"}),"\n",(0,i.jsx)(n.li,{children:"Review application logs"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["For more help, visit our ",(0,i.jsx)(n.a,{href:"/troubleshooting",children:"Troubleshooting Guide"})," or ",(0,i.jsx)(n.a,{href:"https://github.com/DankiCalamari/renerp/issues",children:"GitHub Issues"}),"."]})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>d});var i=r(6540);const o={},l=i.createContext(o);function s(e){const n=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);